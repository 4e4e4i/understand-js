# Глубокое погружение в исходные код Jquery

Настало время погрузится в исходный код одной из популярных библиотек.

Мы собираемся взять все, что изучили за лекции и посмотреть сможем ли использовать эти знания, чтобы
понимать структуру и стиль широко-используемого открытого исходного кода. 

Данная библиотека, возможно, одна из самых известных JS библиотек - Jquery.

Мы не собираемся понимать как реализована или осуществленна каждая фича в библиотеке, но мы собираемся
попробовать узнать сможем ли мы читать данный код и сможем ли научится из него как можно структурировать код,
позволит ли это нам добывать знания и техники или заимствовать какие-либо полезные идеи. 

Если вы уже когда либо писали код на JS или вообщем разрабатывали какой-либо web, то, возможно, вы знакомы с Jquery. 
Библиотека Jquery не добавляет никаких новых фичей в браузер или в JS, это всего-лишь библиотека. Что она делает
по-настоящему - это упрощает синтактические написание определенных вещей и она имеет дело с кроссбраузерными проблемами,
что означает, что каждый браузер (Firefox, Safari, Google Chrome, IE and разнообразные мобильные версии этих браузеров),
все они имеют разные причуди и различия. Jquery обрабатывает их, поэтому вы не должны беспокоиться об этом.

Что Jquery делаешь по-существу, так это позволяет вам манипулировать DOM. DOM - Document Object Model внутри браузера.
Он отделен от JS движка. Это вещь, которая позволяет браузеру смотреть на HTML и решать как отрендерить или нарисовать
его на экране. И у JS есть доступ к DOM, он может управлять им. JS может управлять структурой HTML страницы после того, 
как он загрузится, но управление происходит в памяти. Это древовидная структура, которая содержит или хранит представление 
вашего HTML, которое используется для рисования или рендеринга на экране.

Jquery позволяет проще наблюдать за этим деревом, наблюдать за DOM, находить вещи, находить элементы на странице и
манипулировать ими. 

И так, если я хочу задать переменную, например q, у Jquery есть знак $ или слово jQuery, в который можно передать строку,

```javascript
var q = $("");
```

И я настроил очень простую HTML-страницу с ссылкой на jQuery, где вывожу список с элементами и заголовок.
Так как у JS есть доступ к DOM дереву, с помощью jQuery я могу передать в строку тэг ul и он найдет мне все ul'ы
внутри дерева. А так же можно искать специфичные, например все ul'ы, которые имеют class="people"

```javascript
var q = $("ul.people")
```

jQuery по-настоящему позволяет вам делать запросы в древе, будто в CSS.
Давайте посмотрим что выведет нам консоль лог. 

```javascript
var q = $("ul.people li")
console.log(q); // jQuery.fn.init[3]
```

Мы получили цель типа jquery.fn.init, а не просто jquery. И похоже, что это массив или в конце концов, что-то похожее
на массив. [0] - первый элемент списка, [1] - второй элемент и [2] - третий. И каждый li - элемент, который называется
DOM element. У него есть такие свойства как innerHTML, innerText, это стандартный элемент браузера.

Давайте взглянем на __proto __ - это jQuery объект и если откроем его, то он будет иметь целую кучу методов внутри.

Вспомните как мы говорили о том, как лучше вкладывать методы в прототип, чтобы сохранять место памяти. Здесь так и есть,
мы имеем прототип, у которого огромное количество функций и функционала, что делает jQuery таким популярным. 

Очень не обычно, что мы видим .fn.init, это немного неочевидно. Что это? Давайте взглянем как это построенно. Так же
заметьте, что мы не использовали new оператор, мы всего-лишь использовали $ и передали строку. Чтоже происходит под капотом
библиотеки. Посмотрим на исходный код в несжатом файле исходного кода jquery. Давайте найдем что-то знакомое для нас. 

Первое что мы увидим - мгновенно вызывающаяся function expression. 

```javascript
(function( global, factory ) {})()
```

Данная функция принимает 2 параметра global и factory. Если мы заглянем внутрь, то увидим, что здесь есть проверка на что-то
под названием module и используется ключевое слово typeof. И там проверяется, является ли module и module.exports объектами.
В комментариях ниже описывается, что это делается для проверки в каком окружении запускается jQuery (CommonJs или Node.js)




